
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>@w3bsme on GitHub</title>
    <link crossorigin="anonymous" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,700">
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
<header id="preloader">
    <div aria-busy="true" aria-label="Loading, please wait." role="progressbar"></div>
</header>
<div class="repos" id="js-gh"></div>
<template id="js-tpl-repo">
    <div class="repo">
        <a class="name"></a>
        <p class="desc"></p>
        <p class="info">
            <span class="lang"></span>
            <span class="count">
					<span class="count-num"></span>
				</span>
            <a class="homepage" title="Homepage" target="_blank">
                <svg class="octicon octicon-home" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                    <path fill-rule="evenodd" d="M16 9l-3-3V2h-2v2L8 1 0 9h2l1 5c0 .55.45 1 1 1h8c.55 0 1-.45 1-1l1-5h2zm-4 5H9v-4H7v4H4L2.81 7.69 8 2.5l5.19 5.19L12 14z"></path>
                </svg>
            </a>
    </div>
</template>
<script>
    'use strict';
    (function() {
        fetch("https://api.github.com/users/w3bsme/repos").then(function(response) {
            if (response.status !== 200) {
                /** @type {string} */
                document.getElementById("js-gh").textContent = "Failed to load repositories [" + response.status + "]";
                return;
            }
            response.json().then(function(data) {
                data = data.map(function(repo) {
                    repo.combined_counts = repo.stargazers_count + repo.watchers_count + repo.forks_count;
                    return repo;
                }).sort(function(a, b) {
                    return b.combined_counts - a.combined_counts;
                });
                /** @type {!DocumentFragment} */
                var tableDataCellElementOne = document.createDocumentFragment();
                /** @type {(Element|null)} */
                var layerTemplate = document.getElementById("js-tpl-repo");
                data.forEach(function(repo) {
                    if (repo.fork) {
                        return;
                    }
                    var a = layerTemplate.content.querySelector(".name");
                    a.textContent = repo.name;
                    a.href = repo.html_url;
                    layerTemplate.content.querySelector(".count-num").textContent = repo.combined_counts;
                    layerTemplate.content.querySelector(".desc").textContent = repo.description;
                    layerTemplate.content.querySelector(".lang").textContent = repo.language;
                    layerTemplate.content.querySelector(".homepage").href = repo.homepage || "";
                    /** @type {(Node|null)} */
                    var optionsLink = document.importNode(layerTemplate.content, true);
                    tableDataCellElementOne.appendChild(optionsLink);
                });
                /** @type {(Element|null)} */
                var a = document.getElementById("js-gh");
                /** @type {string} */
                a.textContent = "";
                a.appendChild(tableDataCellElementOne);
                /** @type {string} */
                var b = document.querySelectorAll("#preloader")[0].style = "display:none";
            });
        });
    })();
</script>
</body>
</html>
